# graphql-zealot

> Utilities for the GraphQL warrior

[![Semantically Released][semantic-release-badge]][semantic-release]
[![Build Status][build-badge]][build]
[![Code Coverage][coverage-badge]][coverage]
[![version][version-badge]][package]
[![downloads][downloads-badge]][npmtrends]
[![Styled with Prettier][prettier-badge]][prettier]
[![AirBnB style guide][airbnb-style-badge]][airbnb-style]

[![MIT License][license-badge]][license]
[![All Contributors](https://img.shields.io/badge/all_contributors-1-orange.svg?style=flat-square)](#contributors)
[![PRs Welcome][prs-badge]][prs]
[![Commitizen friendly][commitizen-badge]][commitizen]
[![Code of Conduct][coc-badge]][coc]

[![Watch on GitHub][github-watch-badge]][github-watch]
[![Star on GitHub][github-star-badge]][github-star]
[![Tweet][twitter-badge]][twitter]

Utilities for the GraphQL warrior

### Installing

```shell
yarn add graphql-zealot
```

Or: `npm install --save graphql-zealot`.

## API Reference

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

-   [AddTo](#addto)
-   [addEdge](#addedge)
-   [addEdgeToFragment](#addedgetofragment)
-   [removeEdge](#removeedge)
-   [removeEdgeFromFragment](#removeedgefromfragment)
-   [replaceEdgeInFragment](#replaceedgeinfragment)
-   [replaceEdge](#replaceedge)
-   [cursorForObjectInConnection](#cursorforobjectinconnection)
-   [getContentTypeFromFilename](#getcontenttypefromfilename)
-   [getTypenameForFile](#gettypenameforfile)
-   [optimisticFileResponse](#optimisticfileresponse)
-   [formValues](#formvalues)
-   [isEmpty](#isempty)
-   [isEmptyProp](#isemptyprop)
-   [isEmptyPath](#isemptypath)
-   [isOptimistic](#isoptimistic)
-   [addEdgeToMutationResult](#addedgetomutationresult)
-   [addEdgeAndCursorToMutationResult](#addedgeandcursortomutationresult)
-   [optimisticResponse](#optimisticresponse)
-   [mapEdgesToProp](#mapedgestoprop)
-   [flattenEdges](#flattenedges)

### AddTo

[src/apollo.js:19-19](https://github.com/blackxored/graphql-zealot/blob/8168a755f9423c03f07aaeae5430a7936aa040d2/src/apollo.js#L15-L18 "Source code on GitHub")

Direction to add to in a list.
Either "head" or "tail"

Type: (`"head"` \| `"tail"`)

### addEdge

[src/apollo.js:32-47](https://github.com/blackxored/graphql-zealot/blob/8168a755f9423c03f07aaeae5430a7936aa040d2/src/apollo.js#L32-L47 "Source code on GitHub")

Returns a function that will use Apollo's DataProxy to update
a Query by adding an edge to a list of edges.

**Parameters**

-   `query` **DocumentNode** GraphQL query constructed with `graphql-tag`
-   `operationName` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Mutation name
-   `edgePath` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>** An array to a path to the list of edges
-   `addTo` **[AddTo](#addto)** Whether to add the new edge to the beginning or end of the list

Returns **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** A function that it's passed to Apollo's update function.

### addEdgeToFragment

[src/apollo.js:75-108](https://github.com/blackxored/graphql-zealot/blob/8168a755f9423c03f07aaeae5430a7936aa040d2/src/apollo.js#L75-L108 "Source code on GitHub")

Returns a function that will use Apollo's DataProxy to update
a Fragment by adding an edge to a list of edges.

**Parameters**

-   `fragment` **DocumentNode** GraphQL fragment constructed with `graphql-tag`
-   `operationName` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Mutation name
-   `edgePath` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>** An array to a path to the list of edges
-   `rootId` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The root ID for this fragment
-   `addTo` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Whether to add the new edge to the beginning or end of the list
-   `fragmentOptions` **(DataProxyReadFragmentOptions | DataProxyWriteFragmentOptions)**  (optional, default `{}`)

**Examples**

```javascript
{
  // ...
  update: addEdgeToFragment(
     Favorites.fragments.favorites,
    'toggleFavorite',
    ['favorites'],
    userId,
    'head',
    {
      fragmentName: 'Favorites',
    }
  ),
}
```

Returns **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** A function that it's passed to Apollo's update function.

### removeEdge

[src/apollo.js:119-147](https://github.com/blackxored/graphql-zealot/blob/8168a755f9423c03f07aaeae5430a7936aa040d2/src/apollo.js#L119-L147 "Source code on GitHub")

Remove an edge from a list

**Parameters**

-   `edgePath` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>** 
-   `edgeId` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 
-   `data` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** 
-   `payload` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** 

Returns **any** 

### removeEdgeFromFragment

[src/apollo.js:159-184](https://github.com/blackxored/graphql-zealot/blob/8168a755f9423c03f07aaeae5430a7936aa040d2/src/apollo.js#L159-L184 "Source code on GitHub")

Remove edge from a list in Fragment

**Parameters**

-   `fragment` **DocumentNode** 
-   `edgeId` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 
-   `rootId` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 
-   `edgePath` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>** 
-   `fragmentOptions` **(DataProxyReadFragmentOptions | DataProxyWriteFragmentOptions)** 

Returns **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** 

### replaceEdgeInFragment

[src/apollo.js:223-232](https://github.com/blackxored/graphql-zealot/blob/8168a755f9423c03f07aaeae5430a7936aa040d2/src/apollo.js#L223-L232 "Source code on GitHub")

Replaces an edge in a Fragment

**Parameters**

-   `edge` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** 
-   `fragment` **DocumentNode** 
-   `rootId` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 
-   `edgePath` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>** 

Returns **any** 

### replaceEdge

[src/connection.js:38-55](https://github.com/blackxored/graphql-zealot/blob/8168a755f9423c03f07aaeae5430a7936aa040d2/src/connection.js#L38-L55 "Source code on GitHub")

Replaces an edge in a list

**Parameters**

-   `data` **any** 
-   `edgePath` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>** 
-   `edge` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** 

Returns **any** 

### cursorForObjectInConnection

[src/connection.js:64-79](https://github.com/blackxored/graphql-zealot/blob/8168a755f9423c03f07aaeae5430a7936aa040d2/src/connection.js#L64-L79 "Source code on GitHub")

Modified version of cursorForObjectInConnection which uses primary ID as well

**Parameters**

-   `connection` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)>** 
-   `obj` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** 

Returns **any** 

### getContentTypeFromFilename

[src/files.js:26-29](https://github.com/blackxored/graphql-zealot/blob/8168a755f9423c03f07aaeae5430a7936aa040d2/src/files.js#L26-L29 "Source code on GitHub")

Return a content type from a filename, uses `mime`.

**Parameters**

-   `filename` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

Returns **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** ContentType

### getTypenameForFile

[src/files.js:37-48](https://github.com/blackxored/graphql-zealot/blob/8168a755f9423c03f07aaeae5430a7936aa040d2/src/files.js#L37-L48 "Source code on GitHub")

Convert a content-type to a valid GraphQL scbema type

**Parameters**

-   `file` **{contentType: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)}** 

Returns **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Image, Video, Audio if content type matches, GenericFile otherwise

### optimisticFileResponse

[src/files.js:56-80](https://github.com/blackxored/graphql-zealot/blob/8168a755f9423c03f07aaeae5430a7936aa040d2/src/files.js#L56-L80 "Source code on GitHub")

Returns an optimistic response for a File for instant display

**Parameters**

-   `file` **{contentType: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String), name: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String), url: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)}** 

Returns **any** 

### formValues

[src/forms.js:7-9](https://github.com/blackxored/graphql-zealot/blob/8168a755f9423c03f07aaeae5430a7936aa040d2/src/forms.js#L7-L9 "Source code on GitHub")

Return values for `obj` omitting `id` and `__typename`.

### isEmpty

[src/isEmpty.js:18-18](https://github.com/blackxored/graphql-zealot/blob/8168a755f9423c03f07aaeae5430a7936aa040d2/src/isEmpty.js#L18-L18 "Source code on GitHub")

-   **See: Ramda's isEmpty**

Returns true whether the arguments is nil or and empty string

Type: [Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)

### isEmptyProp

[src/isEmpty.js:24-26](https://github.com/blackxored/graphql-zealot/blob/8168a755f9423c03f07aaeae5430a7936aa040d2/src/isEmpty.js#L24-L26 "Source code on GitHub")

Returns whether a prop `isEmpty`

Type: [Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)

### isEmptyPath

[src/isEmpty.js:32-34](https://github.com/blackxored/graphql-zealot/blob/8168a755f9423c03f07aaeae5430a7936aa040d2/src/isEmpty.js#L32-L34 "Source code on GitHub")

Returns whether the given Ramda path `isEmpty`

Type: [Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)

### isOptimistic

[src/isOptimistic.js:14-14](https://github.com/blackxored/graphql-zealot/blob/8168a755f9423c03f07aaeae5430a7936aa040d2/src/isOptimistic.js#L14-L14 "Source code on GitHub")

Returns true is a given string is an UUID.

UUIDs are commonly used to mark optimistic responses.

Type: function ([string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)): [boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)

### addEdgeToMutationResult

[src/mutations.js:18-25](https://github.com/blackxored/graphql-zealot/blob/8168a755f9423c03f07aaeae5430a7936aa040d2/src/mutations.js#L18-L25 "Source code on GitHub")

Add edge to a mutation result

Shape:
{
  edge: {
    node: result
  }
}

**Parameters**

-   `response` **any** 

Returns **{edge: {node: any}}** 

### addEdgeAndCursorToMutationResult

[src/mutations.js:35-46](https://github.com/blackxored/graphql-zealot/blob/8168a755f9423c03f07aaeae5430a7936aa040d2/src/mutations.js#L35-L46 "Source code on GitHub")

Add both edge and cursor to a mutation result
Cursor is calculated via `cursorForObjectInConnection`.

Type: [Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)

**Parameters**

-   `connectionGetter` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** Function that returns a promise of a Connection of all records
-   `obj` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** The current object

### optimisticResponse

[src/mutations.js:59-77](https://github.com/blackxored/graphql-zealot/blob/8168a755f9423c03f07aaeae5430a7936aa040d2/src/mutations.js#L59-L77 "Source code on GitHub")

Generate an optimistic response

Type: [Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)

**Parameters**

-   `operationName` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The name of the mutation that was run
-   `payloadName` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The name of the payload in the response object
-   `response` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Partial response for the object that's to be returned by the server

Returns **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** function that takes variables and can be passed to Apollo's `optimisticResponse`

### mapEdgesToProp

[src/props.js:25-44](https://github.com/blackxored/graphql-zealot/blob/8168a755f9423c03f07aaeae5430a7936aa040d2/src/props.js#L25-L44 "Source code on GitHub")

Map edges to prop

Convert edges structure to an array of objects (nodes).

Type: [Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)

**Parameters**

-   `edgePath` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** A dot-path to the edges (e.g `viewer.user.favorites`, `edges` suffix is optional)
-   `propName` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Name of the prop to map edges to

Returns **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** Function that takes a data object. mapEdgesToProp is curried so you can pass it directly.

### flattenEdges

[src/props.js:54-75](https://github.com/blackxored/graphql-zealot/blob/8168a755f9423c03f07aaeae5430a7936aa040d2/src/props.js#L54-L75 "Source code on GitHub")

Flattens edges recursively

Replaces edges structures with arrays of nodes.

Type: [Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)

**Parameters**

-   `connection` **Connection** 

## Developing

### Built With

-   Ramda 
-   Apollo
-   GraphQL

### Pre-requisites

### Setting up Dev

Here's a brief intro about what a developer must do in order to start 
developing the project further:

```shell
git clone https://github.com/blackxored/graphql-zealot
cd graphql-zealot
yarn
```

### Building

If your project needs some additional steps for the developer to build the
project after some code changes, state them here. for example:

```shell
yarn build
```

## Versioning

We use [SemVer][semver] for versioning. In addition, it's automatic via
[semantic-release][semantic-release], and our [commit convention][commit-convention].

For the versions available, see the [Releases][releases] on this repository.

## Tests

```shell
yarn test
```

## Style guide

We base our code style on [AirBnB's style guide][airbnb-style] and we check with 
[ESLint][eslint] and automatically format our code with [Prettier][prettier].

## License

This project is licensed under the MIT License - see the 
[license] file for details.

## Acknowledgments

-   Hat tip to anyone who's code was used
-   Inspiration
-   etc

## Contributing

If you're interested in contributing to this project in any form, please read
our [Contribution Guidelines][contributing].

### Code of Conduct

We've adopted a Code of Conduct that we expect project participants to adhere to.
Please read the [full text][coc] so that you can understand what actions 
will and will not be tolerated.

### Contributors

Thanks goes to these people ([emoji key][emojis]):

<!-- ALL-CONTRIBUTORS-LIST:START - Do not remove or modify this section -->

<!-- prettier-ignore -->

| [<img src="https://avatars3.githubusercontent.com/u/133308?v=4" width="100px;"/><br /><sub><b>Adrian Perez</b></sub>](https://adrianperez.codes)<br />[💻](https://github.com/blackxored/graphql-zealot/commits?author=blackxored "Code") [📖](https://github.com/blackxored/graphql-zealot/commits?author=blackxored "Documentation") [🚇](#infra-blackxored "Infrastructure (Hosting, Build-Tools, etc)") [⚠️](https://github.com/blackxored/graphql-zealot/commits?author=blackxored "Tests") |
| :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |

<!-- ALL-CONTRIBUTORS-LIST:END -->

This project follows the [all-contributors][all-contributors] specification.
Contributions of any kind welcome!

[npm]: https://www.npmjs.com/

[node]: https://nodejs.org

[build-badge]: https://img.shields.io/travis/blackxored/graphql-zealot.svg?style=flat-square

[build]: https://travis-ci.org/blackxored/graphql-zealot

[coverage-badge]: https://img.shields.io/codecov/c/github/blackxored/graphql-zealot.svg?style=flat-square

[coverage]: https://codecov.io/github/blackxored/graphql-zealot

[version-badge]: https://img.shields.io/npm/v/graphql-zealot.svg?style=flat-square

[package]: https://www.npmjs.com/package/graphql-zealot

[downloads-badge]: https://img.shields.io/npm/dm/graphql-zealot.svg?style=flat-square

[npmtrends]: http://www.npmtrends.com/graphql-zealot

[license-badge]: https://img.shields.io/npm/l/graphql-zealot.svg?style=flat-square

[license]: https://github.com/blackxored/graphql-zealot/blob/master/LICENSE.md

[semantic-release]: https://github.com/semantic-release/semantic-release

[semantic-release-badge]: https://img.shields.io/badge/%20%20%F0%9F%93%A6%F0%9F%9A%80-semantic--release-e10079.svg?style=flat-square

[commitizen-badge]: https://img.shields.io/badge/commitizen-friendly-brightgreen.svg?style=flat-square

[commitizen]: http://commitizen.github.io/cz-cli/

[prettier-badge]: https://img.shields.io/badge/styled_with-prettier-ff69b4.svg?style=flat-square

[prettier]: https://github.com/prettier/prettier

[airbnb-style-badge]: https://img.shields.io/badge/code%20style-airbnb-green.svg?style=flat-square

[airbnb-style]: https://github.com/airbnb/javascript

[eslint]: http://eslint.org

[prs-badge]: https://img.shields.io/badge/PRs-welcome-brightgreen.svg?style=flat-square

[prs]: http://makeapullrequest.com

[donate-badge]: https://img.shields.io/badge/$-support-green.svg?style=flat-square

[contributing]: https://github.com/blackxored/graphql-zealot/blob/master/CONTRIBUTING.md

[coc-badge]: https://img.shields.io/badge/code%20of-conduct-ff69b4.svg?style=flat-square

[coc]: https://github.com/blackxored/graphql-zealot/blob/master/CODE_OF_CONDUCT.md

[github-watch-badge]: https://img.shields.io/github/watchers/blackxored/graphql-zealot.svg?style=social

[github-watch]: https://github.com/blackxored/graphql-zealot/watchers

[github-star-badge]: https://img.shields.io/github/stars/blackxored/graphql-zealot.svg?style=social

[github-star]: https://github.com/blackxored/graphql-zealot/stargazers

[twitter]: https://twitter.com/intent/tweet?text=Check%20out%20graphql-zealot%20by%20%40blackxored%20https%3A%2F%2Fgithub.com%2Fblackxored%2Fgraphql-zealot%20%F0%9F%91%8D

[twitter-badge]: https://img.shields.io/twitter/url/https/github.com/blackxored/graphql-zealot.svg?style=social

[emojis]: https://github.com/kentcdodds/all-contributors#emoji-key

[all-contributors]: https://github.com/kentcdodds/all-contributors

[semver]: http://semver.org/

[releases]: https://github.com/blackxored/graphql-zealot/releases

[commit-convention]: https://www.npmjs.com/package/@commitlint/config-angular
